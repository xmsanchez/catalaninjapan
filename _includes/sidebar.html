<div class="sidebar sticky-top">
    <div>
        <ul>
            {% assign current_year = "" %}
            {% for post in site.posts %}
                {% assign post_year = post.date | date: "%Y" %}
                
                <!-- If the year changes, create a new collapsible section -->
                {% if post_year != current_year %}
                    {% if current_year != "" %}
                        </ul> <!-- Close the previous year's post list -->
                    {% endif %}
                    <li id="year-{{ post_year }}" class="year">
                        <span class="year-label">{{ post_year }}</span>
                    </li>
                    <ul id="posts-{{ post_year }}" class="post-list" style="display:none;">
                {% endif %}
                
                <!-- List of posts under this year -->
                <li><a href="{{ post.url | relative_url }}">{{ post.title }}</a></li>
                
                {% assign current_year = post_year %}
            {% endfor %}
            </ul> <!-- Close the last year's post list -->
        </ul>
    </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Add event listeners to year labels for toggling
    const yearLabels = document.querySelectorAll(".year");

    yearLabels.forEach(label => {
      label.addEventListener("click", function() {
        const year = label.getAttribute("id").replace("year-", "");
        const postList = document.getElementById(`posts-${year}`);
        
        // Toggle the display of the post list for that year
        if (postList.style.display === "none") {
          postList.style.display = "block";
        } else {
          postList.style.display = "none";
        }
      });
    });
  });
</script>

